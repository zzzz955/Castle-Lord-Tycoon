
# Technical Documentation (MVP)

## 범위
- 현재 구현 중인 기능에 필요한 **최소 기술 사양**만 문서화한다.
- 교환/제작/이벤트 등 미구현 시스템에 대한 설계는 포함하지 않는다.

## 핵심 아키텍처
| 영역 | 설명 |
| --- | --- |
| 이동/조우 | WebSocket 이동 이벤트 → 서버 검증 → 인메모리 좌표 저장 → 5초 주기 DB flush |
| 전투 | 서버 authoritative 전투 계산, 로그 재생은 클라이언트 |
| 영토 | 깃발 설치/제거 시 청크 기반 비트맵 업데이트 |
| 상점 | 6시간 갱신 스케줄러, 장비/공용/깃발 탭 관리 |
| 대장간/술집 | 요청-응답 API + 컨펌 모달 기반 수행 |

## 데이터 연동
- CSV는 `docs/02-data/README.md`에 명시된 MVP 파일만 사용한다.
- 메타데이터 배포 시 manifest를 업데이트하고, 클라이언트는 버전을 확인해 최신 데이터를 로드한다.

## 서버/클라이언트 고려 사항
1. WebSocket 세션 유지와 재접속 처리 (`SignalR` 기반).  
2. 단일 서버를 전제로 인메모리 저장 → 5초 flush → DB 영속성을 확보한다.  
3. 수평 확장 필요 시 Redis/중앙 캐시 도입을 검토한다.

## Stub / 남은 과제
1. 교환/제작 시스템 도입 시 기술 설계 추가.  
2. 이벤트 조우/자원 노드 확장에 따른 아키텍처 영향 분석.  
3. 자동화 테스트(전투 리플레이, 경제 시뮬레이션) 도입 전략.  
4. CI/CD 파이프라인 세부 문서(배포 단계, 환경 변수 관리) 작성.

---
**최종 수정**: 2025-10-24  
**상태**: MVP 범위 정리  
**작성자**: SangHyeok
