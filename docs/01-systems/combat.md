# ì „íˆ¬ ì‹œìŠ¤í…œ

## ê°œìš”

```yaml
type: "ì™„ì „ ìë™ ì „íˆ¬"
grid: "3Ã—3"
max_party: 4
element_system: true
element_modifier: "Â±30%"
round_limit: 10
```

**í•µì‹¬ ê°€ì¹˜**: ë°°ì¹˜ì™€ ìƒì„±ìœ¼ë¡œ ì „ëµì„ ë§Œë“œëŠ” ë‹¨ìˆœí•˜ì§€ë§Œ ê¹Šì´ ìˆëŠ” ì „íˆ¬

## ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ

### 3Ã—3 ë°°ì¹˜
```
[7] [4] [1]   ìš°ì¸¡ ìƒë‹¨(1) â†’ ìš°ì¸¡ ì¤‘ë‹¨(2) â†’ ìš°ì¸¡ í•˜ë‹¨(3)
[8] [5] [2]   ì¤‘ì•™ ìƒë‹¨(4) â†’ ì¤‘ì•™ ì¤‘ë‹¨(5) â†’ ì¤‘ì•™ í•˜ë‹¨(6)
[9] [6] [3]   ì¢Œì¸¡ ìƒë‹¨(7) â†’ ì¢Œì¸¡ ì¤‘ë‹¨(8) â†’ ì¢Œì¸¡ í•˜ë‹¨(9)
```

**í–‰ë™ ìš°ì„ ìˆœìœ„**: ë²ˆí˜¸ ìˆœì„œëŒ€ë¡œ (1â†’2â†’3â†’4â†’5â†’6â†’7â†’8â†’9)

```yaml
placement_rules:
  - ìµœëŒ€ 4ëª…ê¹Œì§€ ë°°ì¹˜ ê°€ëŠ¥
  - ë¹ˆ ì¹¸ í—ˆìš©
  - ë°°ì¹˜ ìˆœì„œê°€ ì „ëµì˜ í•µì‹¬
  - ì ë„ ë™ì¼í•œ ê·œì¹™ ì ìš©, ë‹¨ UIìƒ í”Œë ˆì´ì–´ì™€ ì¢Œìš° ë°˜ì „ë˜ì–´ ë³´ì„
```

### ì „ëµì  ë°°ì¹˜

```yaml
front_positions: [1, 2, 3]  # ì ì—ê²Œ ê°€ê¹Œì›€, ë¨¼ì € ê³µê²©ë°›ìŒ
mid_positions: [4, 5, 6]    # ê· í˜•ì¡íŒ ìœ„ì¹˜
back_positions: [7, 8, 9]   # ì•ˆì „í•˜ì§€ë§Œ ëŠ¦ê²Œ í–‰ë™
```

## ì „íˆ¬ íë¦„

### 1. ì¡°ìš° ë°œìƒ
```
í•„ë“œ ì´ë™ â†’ íƒ€ì¼ íƒœê·¸ ì²´í¬ â†’ í™•ë¥  íŒì • â†’ ì „íˆ¬ ëŒì…
```

### 2. ì „íˆ¬ ì‹œì‘
```yaml
combat_initialization:
  - íŒŒí‹° ë°°ì¹˜ í™•ì •
  - ì  ë°°ì¹˜ ìƒì„±
  - ë¼ìš´ë“œ ì¹´ìš´í„° ì´ˆê¸°í™” (0/10)
```

### 3. ë¼ìš´ë“œ ì§„í–‰
```
ê° ë¼ìš´ë“œ:
  1. í”Œë ˆì´ì–´ ì„ ê³µ í›„ 1í„´ì”© ê³µê²©ì„ ì£¼ê³  ë°›ìŒ
  2. ìš°ì„ ìˆœìœ„ ìˆœì„œëŒ€ë¡œ í–‰ë™ (1â†’9)
  3. ê° ìœ ë‹›:
     - ìƒì¡´ ì—¬ë¶€ ì²´í¬ (ì „íˆ¬ ì¤‘ ì‚¬ë§í•œ ê¸°ë¬¼ì˜ í„´ì€ ìŠ¤í‚µ, ìŠ¤í‚µëœ ê²½ìš° ìƒëŒ€ë°©ì˜ í„´ìœ¼ë¡œ ë„˜ì–´ê°)
     - íƒ€ê²Ÿ ì„ íƒ (ìš°ì„  ê³µê²© ë“± íš¨ê³¼ê°€ ì—†ì„ ê²½ìš° ìì‹ ê³¼ ê°™ì€ í–‰ì˜ ë§¨ ì• ê¸°ë¬¼ì„ íƒ€ê²Ÿìœ¼ë¡œ ê³µê²©, ê°™ì€ í–‰ì— íƒ€ê²Ÿì´ ì—†ì„ ê²½ìš° ìœ„ìª½ í–‰ ìš°ì„  íƒ€ê²©, ìœ„ìª½ í–‰ì—ë„ ê¸°ë¬¼ì´ ì—†ì„ ê²½ìš° ì•„ë˜ìª½ í–‰ íƒ€ê²©)
     - ë°ë¯¸ì§€ ê³„ì‚° (ì†ì„± ìƒì„± ì ìš©)
     - ë°ë¯¸ì§€ ì ìš©
  4. ì–‘ì¸¡ ì „ë©¸ ì²´í¬
  5. ë¼ìš´ë“œ ì¦ê°€
```

### 4. ì „íˆ¬ ì¢…ë£Œ
```yaml
win_condition: "ì  ì „ë©¸"
lose_condition: "ì•„êµ° ì „ë©¸ ë˜ëŠ” ë¼ìš´ë“œ 10 ì´ˆê³¼"
draw_condition: "ë¼ìš´ë“œ 10ì—ì„œ ì–‘ì¸¡ ìƒì¡´"

round_11_penalty:
  - 11ë¼ìš´ë“œë¶€í„° ì–‘ì¸¡ ë°ë¯¸ì§€ ì¦ê°€
  - ë§¤ ë¼ìš´ë“œ 10%ì”© ê°€ì†
  - ê°•ì œ ì¢…ë£Œ ìœ ë„
```

## ì†ì„± ì‹œìŠ¤í…œ

### 4ì†ì„± ìƒì„±

```yaml
elements:
  water: "ë¬¼"
  fire: "ë¶ˆ"
  earth: "ë•…"
  none: "ë¬´ì†ì„±"

advantage_table:
  water > fire: "+30% damage"
  fire > earth: "+30% damage"
  earth > water: "+30% damage"
  none: "Â±0% (ì¤‘ë¦½)"

disadvantage_table:
  water < earth: "-30% damage"
  fire < water: "-30% damage"
  earth < fire: "-30% damage"
```

### ë°ë¯¸ì§€ ê³„ì‚°

```typescript
function calculateDamage(
  attacker: Hero,
  defender: Hero
): number {
  let baseDamage = attacker.attack - defender.defense;
  if (baseDamage < 1) baseDamage = 1;

  // ì†ì„± ìƒì„± ì ìš©
  const elementBonus = getElementModifier(
    attacker.element,
    defender.element
  ); // Â±30%

  const finalDamage = baseDamage * (1 + elementBonus);

  return Math.floor(finalDamage);
}
```

## ë³´ìƒ ì‹œìŠ¤í…œ

### ê²½í—˜ì¹˜ ë¶„ë°°

```yaml
exp_distribution:
  rule: "ìƒì¡´ìë§Œ ê· ë“± ë¶„ë°°"
  calculation: "ì´ ê²½í—˜ì¹˜ / ìƒì¡´ì ìˆ˜"
  dead_heroes: "0 ê²½í—˜ì¹˜"

example:
  total_exp: 360
  survivors: 3
  dead: 1
  result: "ê° ìƒì¡´ì 120 ê²½í—˜ì¹˜, ì‚¬ë§ì 0"
```

### ë“œë ë³´ìƒ

```yaml
drop_system:
  rule: "ìƒì¡´ ì—¬ë¶€ ë¬´ê´€"
  factors:
    - ëª¬ìŠ¤í„° ë“œë í…Œì´ë¸”
    - ì˜ì›… í–‰ìš´ ìŠ¤íƒ¯
    - ì¥ë¹„ ë“œëë¥  ì˜µì…˜
    - ê³„ê¸‰ ë³´ë„ˆìŠ¤
```

## ì „íˆ¬ ê²°ê³¼ ëˆ„ì 

### í•„ë“œ ëˆ„ì  ê·œì¹™

```yaml
accumulated:
  - HP ì†ì‹¤ (ëˆ„ì )
  - ì˜ì›… ì‚¬ë§ ìƒíƒœ (ëˆ„ì )

reset_on_combat_end:
  - ë””ë²„í”„/ë²„í”„
  - ìŠ¤í‚¬ ì¿¨ë‹¤ìš´
  - ì „íˆ¬ ì„ì‹œ ìƒíƒœ

recovery_methods:
  camping: "ì•¼ì˜ìœ¼ë¡œ HP íšŒë³µ"
  town: "ë§ˆì„ ê·€í™˜ ì‹œ ì™„ì „ íšŒë³µ (HP + ë¶€í™œ)"
```

## UI ìš”êµ¬ì‚¬í•­

### ì „íˆ¬ í™”ë©´

```yaml
must_display:
  - 3Ã—3 ê·¸ë¦¬ë“œ (ì•„êµ°/ì êµ°)
  - ê° ì˜ì›… HP ë°”
  - ì˜ì›… ì´ˆìƒí™” ë° ì†ì„± ì•„ì´ì½˜
  - ì˜ì›… ê¸°ë¬¼(ê³µê²©í˜•, ë°©ì–´í˜•, ìœ í‹¸í˜•)
  - ê³µê²© ì• ë‹ˆë©”ì´ì…˜(ê³µê²©í˜•-ì›ê±°ë¦¬ & í™œ, ë°©ì–´í˜•-ê·¼ê±°ë¦¬ & ê²€, ë°©íŒ¨, ìœ í‹¸í˜•-ì›ê±°ë¦¬ & ì§€íŒ¡ì´)
  - ë¼ìš´ë“œ ì¹´ìš´í„°

actions:
  - ìŠ¤í‚µ (ê²°ê³¼ë§Œ ë³´ê¸°)
  - ë¦¬í”Œë ˆì´ (ì „íˆ¬ ì¬ìƒ)
  - ì†ë„ ì¡°ì ˆ (1x, 2x, 3x)
```

### ì „íˆ¬ ê²°ê³¼

```yaml
result_screen:
  summary:
    - ìŠ¹ë¦¬/íŒ¨ë°°/ë¬´ìŠ¹ë¶€
    - ìƒì¡´ì ëª©ë¡
    - ì‚¬ë§ì ëª©ë¡

  rewards:
    - íšë“ ê²½í—˜ì¹˜ (ì˜ì›…ë³„)
    - ë“œë ì•„ì´í…œ ëª©ë¡
    - ê³¨ë“œ íšë“

  stats:
    - ì´ ë°ë¯¸ì§€
    - ë¼ìš´ë“œ ìˆ˜
    - MVP (ìµœë‹¤ ë°ë¯¸ì§€)
```

## ì‹œìŠ¤í…œ ì—°ë™

### ì˜ì¡´ ì‹œìŠ¤í…œ
- `character.md` - ì˜ì›… ìŠ¤íƒ¯, ì†ì„±
- `equipment.md` - ì¥ë¹„ íš¨ê³¼ ì ìš©
- `encounter.md` - ì „íˆ¬ ì§„ì… ì¡°ê±´

### ì œê³µ ê¸°ëŠ¥
- ì „íˆ¬ ê²°ê³¼ (ìŠ¹/íŒ¨)
- ê²½í—˜ì¹˜ ë³´ìƒ
- ë“œë ì•„ì´í…œ
- ì˜ì›… ìƒíƒœ ë³€í™” (HP, ì‚¬ë§)

## ë°ì´í„° êµ¬ì¡°

```typescript
interface Combat {
  combatId: string;
  playerParty: Hero[];
  enemyParty: Enemy[];
  gridPositions: {
    player: (Hero | null)[];  // length 9
    enemy: (Enemy | null)[];  // length 9
  };
  currentRound: number;
  maxRound: number;
  log: CombatAction[];
}

interface CombatAction {
  round: number;
  actorId: string;
  targetId: string;
  damage: number;
  elementBonus: number;
  targetDied: boolean;
}

interface CombatResult {
  victory: boolean;
  survivors: Hero[];
  dead: Hero[];
  expGained: Map<string, number>;  // heroId -> exp
  itemsDropped: Item[];
  goldGained: number;
}
```

## ë°¸ëŸ°ìŠ¤ íŒŒë¼ë¯¸í„°

```yaml
damage_formula:
  base: "attack - defense"
  min_damage: 1
  element_bonus: 0.3  # Â±30%

round_limit:
  normal: 10
  penalty_start: 11
  penalty_increase: 0.1  # 10% per round

exp_scaling:
  base_exp: "monster_level * 10"
  party_penalty: false  # ë¶„ë°°ë§Œ, ì´ëŸ‰ ê°ì†Œ ì—†ìŒ
```

## í™•ì¥ ê°€ëŠ¥ì„±

```yaml
future_features:
  - ìŠ¤í‚¬ ì‹œìŠ¤í…œ (íŒ¨ì‹œë¸Œë§Œ)
  - ìƒíƒœ íš¨ê³¼ (í™”ìƒ, ë¹™ê²° ë“±)
  - í¬ì§€ì…˜ íŠ¹í™” (ì „ì—´, í›„ì—´ ë³´ë„ˆìŠ¤)
  - ì½¤ë³´ ì‹œìŠ¤í…œ
```

## êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] 3Ã—3 ê·¸ë¦¬ë“œ ë Œë”ë§
- [ ] ì „íˆ¬ ë¡œì§ êµ¬í˜„
- [ ] ì†ì„± ìƒì„± ê³„ì‚°
- [ ] ê²½í—˜ì¹˜ ë¶„ë°°
- [ ] ë“œë ì‹œìŠ¤í…œ
- [ ] ì „íˆ¬ ë¡œê·¸ ê¸°ë¡
- [ ] ë¦¬í”Œë ˆì´ ê¸°ëŠ¥
- [ ] ìŠ¤í‚µ ê¸°ëŠ¥

---
**ìµœì¢… ìˆ˜ì •**: 2025-10-18
**ìƒíƒœ**: ğŸ”´ ì´ˆì•ˆ
**ì‘ì„±ì**: SangHyeok
