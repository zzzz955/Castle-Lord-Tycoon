# 계급(Progression) 시스템

## 1. 개요
- 계급은 플레이어가 편입한 영토 수치에 따라 단계적으로 달성하는 성장 시스템이다.
- 초기 계급은 **성주**에서 시작하며, 최종 목표는 **황제**에 도달하는 것이다.
- 계급이 상승할수록 다양한 혜택(경험치/골드/아이템 드롭률/이동 속도 보너스, 깃발 범위 확대 등)이 누적으로 적용된다.
- 중세 시대의 실제 명칭을 활용해 몰입감과 장기 성장 동기를 제공한다.

## 2. 계급 단계 및 요구 영토
| 계급 | 필요 영토 수 | 누적 보너스 |
| --- | --- | --- |
| 성주 | 0 | (기본 상태) |
| 남작 | 100 | 경험치 획득량 +10% |
| 자작 | 400 | 경험치 획득량 +20% |
| 백작 | 800 | 경험치 +30%, 이동 속도 +20% |
| 후작 | 1,500 | 경험치 +40%, 이동 속도 +20%, 골드 +10% |
| 공작 | 2,500 | 경험치 +50%, 골드 +10%, 아이템 드롭률 +10% |
| 대신 | 3,800 | 경험치 +70%, 골드 +10%, 아이템 드롭률 +10%, 이동 속도 +30% |
| 대공 | 5,500 | 경험치 +90%, 골드 +20%, 아이템 드롭률 +20%, 이동 속도 +30% |
| 국왕 | 7,000 | 경험치 +110%, 골드 +30%, 아이템 드롭률 +30%, 이동 속도 +30% |
| 황제 | 10,000 | 경험치 +150%, 골드 +60%, 아이템 드롭률 +60%, 이동 속도 +50% |

> 표의 누적 보너스는 해당 계급을 달성했을 때 합산 적용된 최종 값이다.  
> 예: 국왕의 경험치 +20%는 이전 단계들의 합산 결과이므로 최종적으로 +110%가 된다.

## 3. 깃발 범위 확장
- 특정 계급 달성 시 상점에서 구매 가능한 깃발 범위가 확장된다.
| 계급 | 깃발 범위 | 비고 |
| --- | --- | --- |
| 성주 | 3×3 | 기본 깃발 |
| 자작 | 5×5 | 상점에서 구매 가능 |
| 후작 | 7×7 | 상점에서 구매 가능 |
| 대신 | 9×9 | 상점에서 구매 가능 |
- 깃발 가격 및 판매 규칙은 `docs/01-systems/shop.md`, 깃발 설치/제거 규칙은 `docs/01-systems/territory.md` 참고.

## 4. 적용 규칙
- 계급 달성 시 해당 단계까지의 모든 혜택이 누적 적용된다.
  - 경험치/골드/아이템 드롭률/이동 속도 등은 각 단계의 증가분을 합산한 값으로 계산한다(예: 경험치 1 × (1 + 1.5) = 2.5배).
- 소유 영토가 감소해도 한 번 달성한 계급은 유지한다(영토 감소 로직은 추후 확정).
- 계급 정보는 서버에서 관리하며, 상점/깃발/탐험 시스템과 실시간 연동된다.

## 5. 데이터 구조 제안
| 파일 | 설명 |
| --- | --- |
| `rank_requirements.csv` | 계급 ID, 필요 영토 수, 누적 보너스 수치 |
| `rank_benefits.csv` | 계급별 추가 보너스(경험치/골드/드롭률/이동 속도) |
| `rank_flag_unlocks.csv` | 계급별 깃발 범위/판매 제한 |

## 6. Stub / 남은 과제
1. 영토 감소 시 계급 하락 여부(현재는 유지) 확정.
2. 각 보너스 수치가 전투/경제 시스템에 반영되는 방식(연산 순서, 상한 등) 설계.
3. 계급 달성 연출(애니메이션, 알림) 및 UI 배치.
4. 계급별 추가 혜택(예: 상점 특별 품목, 이동 옵션 등) 확장 여부 검토.

---
**최종 수정**: 2025-10-23  
**상태**: 개편  
**작성자**: SangHyeok  
